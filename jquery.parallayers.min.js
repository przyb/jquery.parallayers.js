/*!
 * parallayers.js v.01 by Jakub Przyborowski, http://www.przyborowski.info/
 * http://github.com/przyb/jquery.parallayers.js
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(a,c,d){var b=function(e){this._w=c(a);if(e===d){e=this._w;c("html").mousemove(c.proxy(this._onMouseMove,this))}else{e=c(e);e.mousemove(c.proxy(this._onMouseMove,this))}this._containerWidth=parseInt(e.width());this._containerHeight=parseInt(e.height());this._parallaxPosX=0;this._parallaxPosY=0;this._isEnabled=false;this._layers=[];this._w.resize(c.proxy(this._onResize,this))};b.prototype.addLayer=function(f,e){if(e===d){e={}}this._layers.push({layer:f,options:{x:(e.x!==d)?e.x:0,y:(e.y!==d)?e.y:0,perspective:(e.perspective!==d)?e.perspective:0,rotateX:(e.rotateX!==d)?e.rotateX:0,rotateY:(e.rotateY!==d)?e.rotateY:0,rotateZ:(e.rotateZ!==d)?e.rotateZ:0}});return this};b.prototype.getLayerOptions=function(e){var f=this._findLayer(e);if(f){return f.options}return null},b.prototype.setLayerOption=function(f,e,h){var g=this._findLayer(f);if(g&&g.options[e]!==d){g[e]=h}return this},b.prototype.setLayerOptions=function(g,e){var h=this._findLayer(g);if(h){for(var f in e){if(h.options[f]!==d){h.options[f]=e[f]}}}return this},b.prototype.enable=function(){this._isEnabled=true;return this};b.prototype.disable=function(){this._isEnabled=false;return this};b.prototype._findLayer=function(f){if(parseInt(f)==f){if(this._layers[f]!==d){return this._layers[f]}return null}if(typeof(f)=="string"){for(var e in this._layers){if(this._layers[e].layer.hasClass(f)){return this._layers[e]}}}else{for(var e in this._layers){if(this._layers[e].layer===f){return this._layers[e]}}}return null};b.prototype._onMouseMove=function(g){if(this._isEnabled){if(g.pageX>=0&&g.pageX<=this._containerWidth&&g.pageX>=0&&g.pageY<=this._containerHeight){this._parallaxPosX=(2*g.pageX/this._containerWidth)-1;this._parallaxPosY=(2*g.pageY/this._containerHeight)-1;var f;for(f in this._layers){this._layers[f].layer.css({left:Math.round(this._layers[f].options.x*this._parallaxPosX),top:Math.round(this._layers[f].options.y*this._parallaxPosY),perspective:this._layers[f].options.perspective,rotateX:(this._layers[f].options.rotateX*this._parallaxPosY)+"deg",rotateY:(this._layers[f].options.rotateY*this._parallaxPosX)+"deg",rotate:(this._layers[f].options.rotateZ*this._parallaxPosX)+"deg"})}}}},b.prototype._onResize=function(f){this._containerWidth=parseInt(this._w.width());this._containerHeight=parseInt(this._w.height())};a.Parallayers=b;c.fn.parallayers=function(j,f){if(f===d){f={}}var e=c(this),k=new b(f.relativeTo),h,g;if(e.length){e.find(".layer").each(function(){h=c(this);k.addLayer(h)});if(j!==d){for(g in j){k.setLayerOptions(g,j[g])}}if(f.enabled===d||f.enabled==true){k.enable()}return k}return null}})(window,window.jQuery);